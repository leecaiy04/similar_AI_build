/* 全局与主题变量 */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #f5f5f5;
  --card-bg: #ffffff;
  --text: #333333;
  --muted: #7f8c8d;
  --border: #ecf0f1;
  --primary: #3498db;
  --primary-600: #2980b9;
  --success: #27ae60;
  --danger: #e74c3c;
  --warning: #f39c12;
  --info: #17a2b8;
  --table-head: #34495e;
}

body.theme-dark {
  --bg: #0f172a;
  --card-bg: #111827;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --border: #1f2937;
  --primary: #60a5fa;
  --primary-600: #3b82f6;
  --success: #34d399;
  --danger: #f87171;
  --warning: #fbbf24;
  --info: #22d3ee;
  --table-head: #1f2937;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.45;
  color: var(--text);
  background-color: var(--bg);
  font-size: 14px;
}

.container { max-width: 1280px; margin: 0 auto; padding: 12px; }

/* 头部 */
header { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 14px; background: var(--card-bg); padding: 10px 14px; border-radius: 10px; box-shadow: 0 1px 6px rgba(0,0,0,0.08); }
header h1 { color: var(--text); font-size: 1.3em; }
header p { color: var(--muted); font-size: 0.9em; }
.header-actions { display: flex; gap: 8px; align-items: center; }
.theme-toggle { padding: 6px 10px; border: 1px solid var(--border); background: transparent; color: var(--text); border-radius: 6px; cursor: pointer; font-size: 12px; }
.theme-toggle:hover { background: var(--border); }

/* 主体布局：桌面双栏 */
.main-content { display: grid; grid-template-columns: 1fr; gap: 12px; }
@media (min-width: 1100px) {
  .main-content { grid-template-columns: 1fr 1.25fr; align-items: start; }
  .main-content > .results-section { grid-column: 2; grid-row: 1 / span 3; }
}

section { background: var(--card-bg); padding: 12px; border-radius: 10px; box-shadow: 0 1px 6px rgba(0,0,0,0.08); }
section h2 { color: var(--text); margin-bottom: 10px; font-size: 1.05em; border-bottom: 2px solid var(--primary); padding-bottom: 6px; }

/* 输入区 */
.input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.input-column label { font-weight: 600; margin-bottom: 8px; color: var(--text); }
.input-column textarea { width: 100%; height: 120px; padding: 10px; border: 2px solid var(--border); background: transparent; color: var(--text); border-radius: 6px; font-size: 12px; font-family: 'Courier New', monospace; resize: vertical; transition: border-color 0.2s ease; }
.input-column textarea:focus { outline: none; border-color: var(--primary); }
.input-info { margin-top: 6px; font-size: 12px; color: var(--muted); }
.sample-hint { margin-top: 6px; font-size: 12px; color: var(--muted); }

/* 设置区 */
.settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 10px; }
.setting-item { display: flex; flex-direction: column; gap: 6px; }
.setting-item label { font-weight: 600; color: var(--text); display: flex; align-items: center; gap: 8px; }
.setting-item input[type="checkbox"] { width: 18px; height: 18px; }
.setting-item input[type="range"] { width: 100%; margin: 8px 0; }
.setting-item textarea { width: 100%; height: 56px; padding: 8px; border: 2px solid var(--border); background: transparent; color: var(--text); border-radius: 5px; font-size: 13px; resize: vertical; }
#threshold-value { font-weight: bold; color: var(--primary); font-size: 14px; }

/* 控制区 */
.control-buttons { display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap; }
.control-head { display: flex; gap: 12px; align-items: center; margin-bottom: 10px; }
.control-head .threshold-inline { display: flex; align-items: center; gap: 8px; flex: 0 0 360px; }
.control-head .threshold-inline label { font-weight: 600; color: var(--text); white-space: nowrap; }
.control-head .progress-wrap { display: flex; align-items: center; gap: 8px; flex: 1; }
.control-head .progress-wrap .progress-bar { flex: 1; margin: 0; }
.control-head .progress-wrap .progress-text { min-width: 96px; text-align: right; }
.btn { padding: 6px 12px; border: none; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s ease; text-transform: uppercase; letter-spacing: 0.3px; }
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover:not(:disabled) { background: var(--primary-600); transform: translateY(-2px); }
.btn-secondary { background: #95a5a6; color: white; }
.btn-secondary:hover:not(:disabled) { background: #7f8c8d; transform: translateY(-2px); }
.btn-success { background: var(--success); color: white; }
.btn-success:hover:not(:disabled) { filter: brightness(0.95); transform: translateY(-2px); }
.btn-info { background: var(--info); color: white; }
.btn-info:hover:not(:disabled) { filter: brightness(0.95); transform: translateY(-2px); }
.btn-warning { background: var(--warning); color: white; }
.btn-warning:hover:not(:disabled) { filter: brightness(0.95); transform: translateY(-2px); }
.btn-danger { background: var(--danger); color: white; }
.btn-danger:hover:not(:disabled) { filter: brightness(0.95); transform: translateY(-2px); }
.btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

.progress-section { margin-top: 10px; }
.progress-bar { width: 100%; height: 12px; background: var(--border); border-radius: 10px; overflow: hidden; margin-bottom: 6px; }
.progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--success)); width: 0%; transition: width 0.3s ease; border-radius: 10px; }
.progress-text { text-align: center; font-weight: 600; color: var(--text); font-size: 12px; }

/* 结果区 */
.results-controls { display: flex; gap: 8px; margin-bottom: 10px; flex-wrap: wrap; }
.results-container { max-height: 520px; overflow-y: auto; border: 2px solid var(--border); border-radius: 8px; background: transparent; }
.no-results { text-align: center; padding: 40px; color: var(--muted); font-style: italic; }

.results-table-container { overflow-x: auto; }
.results-table { width: 100%; border-collapse: collapse; font-size: 12px; color: var(--text); }
.results-table th { background: var(--table-head); color: white; padding: 8px 6px; text-align: left; font-weight: 600; position: sticky; top: 0; z-index: 10; }
.results-table td { padding: 6px 6px; border-bottom: 1px solid var(--border); vertical-align: top; }
.result-row:hover { background-color: rgba(52, 152, 219, 0.08); }
.result-row.locked { background-color: rgba(39, 174, 96, 0.08); }
.source-cell { font-weight: 600; color: var(--text); min-width: 150px; }
.best-match-cell { min-width: 200px; }
.best-match { cursor: pointer; padding: 3px 6px; border-radius: 4px; transition: background-color 0.3s ease; font-family: 'Courier New', monospace; }
.best-match:hover { background-color: rgba(52, 152, 219, 0.08); }
.similarity-cell { text-align: center; min-width: 80px; }
.similarity-value { font-weight: 600; font-size: 14px; padding: 3px 6px; border-radius: 4px; }
.similarity-value.exact { color: var(--success); background-color: rgba(39, 174, 96, 0.15); }
.similarity-value.similar { color: var(--warning); background-color: rgba(243, 156, 18, 0.12); }
.similarity-value.medium { color: #e67e22; background-color: rgba(230, 126, 34, 0.12); }
.similarity-value.low { color: var(--danger); background-color: rgba(231, 76, 60, 0.12); }
.other-matches-cell { min-width: 250px; }
.other-match { display: flex; justify-content: space-between; align-items: center; padding: 4px 6px; margin: 2px 0; background: rgba(0,0,0,0.03); border-radius: 4px; border-left: 3px solid var(--primary); cursor: pointer; transition: all 0.2s ease; font-family: 'Courier New', monospace; }
.other-match:hover { background: rgba(52, 152, 219, 0.12); border-left-color: var(--primary-600); transform: translateX(2px); }
.other-match .match-text { flex: 1; font-size: 12px; }
.other-match .match-similarity { font-weight: 600; font-size: 11px; color: var(--muted); margin-left: 8px; }
.no-matches { color: var(--muted); font-style: italic; font-size: 12px; }
.locked-indicator { color: var(--success); font-weight: 600; font-size: 12px; }
.action-cell { text-align: center; min-width: 72px; }

/* diff 样式 */
.diff-added { background-color: #ffebee; color: #c62828; padding: 1px 2px; border-radius: 2px; font-weight: 600; }
.diff-removed { background-color: #e8f5e8; color: #2e7d32; text-decoration: line-through; padding: 1px 2px; border-radius: 2px; font-weight: 600; }
.diff-unchanged { color: var(--text); }

/* 滚动条 */
.results-container::-webkit-scrollbar { width: 8px; }
.results-container::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
.results-container::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
.results-container::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }

/* 响应式 */
@media (max-width: 1024px) {
  .container { padding: 10px; }
  .main-content { display: flex; flex-direction: column; }
  .input-group { grid-template-columns: 1fr; }
  .settings-grid { grid-template-columns: 1fr; }
  .control-buttons, .results-controls { flex-direction: column; }
  .btn { width: 100%; }
}
