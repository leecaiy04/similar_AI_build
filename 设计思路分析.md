# 字符串相似度比较工具 - 设计思路分析

## 项目概述

这是一个纯前端的字符串相似度比较工具，主要用于批量比对两列文本数据，找出最相似的匹配项。项目采用模块化设计，将UI交互、相似度计算和字符差异分析分离。

## 核心设计理念

### 1. 模块化架构
- **UI层** (`app.js`): 负责用户界面交互、数据输入输出、结果展示
- **计算层** (`similarity.js`): 负责相似度算法实现、文本预处理、字符差异分析
- **样式层** (`styles.css`): 负责界面美化和用户体验

### 2. 用户体验优先
- 提供示例数据，降低使用门槛
- 实时进度反馈，避免用户等待焦虑
- 字符级差异高亮，直观展示文本差异
- 一键锁定功能，提高工作效率

## 功能模块设计

### 输入模块
- **双列输入**: 源数据列（被比较）vs 目标数据列（比较对象）
- **实时统计**: 显示输入行数，帮助用户了解数据规模
- **智能提示**: 根据输入状态动态显示操作提示

### 设置模块
- **相似度阈值**: 0-100%可调节，过滤低相似度结果
- **文本预处理选项**:
  - 忽略标点符号：提高匹配准确性
  - 全角转半角：统一字符格式
  - 忽略不可见字符：清理数据噪音
  - 整体字符串比较：避免分词干扰
- **同义词组**: 支持多组同义词，影响计算但不改变显示

### 计算模块
- **多算法融合**: 编辑距离 + Jaro-Winkler，可调权重
- **同义词处理**: 将同组词映射为代表词，提高匹配精度
- **预处理流水线**: 标准化 → 同义词替换 → 相似度计算

### 结果展示模块
- **表格化展示**: 源数据、最相似值、相似度、其他相似值
- **字符级差异高亮**:
  - 新增字符：红底显示
  - 删除字符：绿底+删除线
  - 未变化：正常显示
- **交互功能**:
  - 点击锁定：固定匹配结果
  - 点击备选：临时切换显示
  - 自动锁定：100%相似度自动锁定

### 数据管理模块
- **导出功能**: 完整结果、简化结果
- **本地存储**: 保存设置到localStorage
- **数据清理**: 一键清空结果

## 技术实现细节

### 相似度算法
1. **编辑距离 (Levenshtein)**: 计算字符级别的编辑操作次数
2. **Jaro-Winkler**: 考虑字符位置和前缀匹配的相似度
3. **加权融合**: 默认权重 编辑距离60% + Jaro-Winkler40%

### 文本预处理
1. **标准化**: 小写化、去除多余空格
2. **字符转换**: 全角转半角映射表
3. **噪音过滤**: 移除标点符号、不可见字符
4. **同义词替换**: 整段文本内联替换

### 字符差异分析
- **LCS算法**: 最长公共子序列，生成差异序列
- **差异类型**: added(新增)、removed(删除)、unchanged(未变)
- **HTML渲染**: 为每种差异类型生成对应的CSS类

### 性能优化
- **异步处理**: 使用setTimeout避免UI阻塞
- **进度反馈**: 实时更新进度条和状态文本
- **内存管理**: 及时清理临时数据

## 界面设计思路

### 视觉层次
- **头部**: 项目标题和简介，建立品牌认知
- **输入区**: 双列布局，清晰的数据输入界面
- **设置区**: 网格布局，分组展示各种选项
- **控制区**: 按钮组 + 进度条，操作反馈明确
- **结果区**: 表格展示，支持滚动和交互

### 交互设计
- **状态反馈**: 按钮禁用、进度条、状态文本
- **颜色编码**: 相似度等级用不同颜色区分
- **悬停效果**: 按钮和表格行的视觉反馈
- **响应式**: 移动端适配，保证可用性

### 用户体验
- **默认数据**: 提供示例数据，降低学习成本
- **智能提示**: 根据操作状态显示相应提示
- **快捷操作**: 一键锁定、批量导出
- **数据持久化**: 设置保存，避免重复配置

## 扩展性设计

### 算法扩展
- 预留了Myers差异算法接口
- 支持权重调整，可适配不同场景
- 同义词组支持多组配置

### 功能扩展
- 结果排序和筛选
- 更多导出格式（JSON、Excel）
- 批量导入功能
- 历史记录管理

### 性能扩展
- Web Worker支持（已预留接口）
- 分页加载大数据
- 缓存机制

## 设计亮点

1. **同义词智能处理**: 仅影响计算，不改变显示，保持原文对比的直观性
2. **字符级差异可视化**: 红绿配色方案，符合用户直觉
3. **渐进式交互**: 临时选择 → 锁定确认，避免误操作
4. **零配置启动**: 示例数据 + 默认设置，开箱即用
5. **纯前端实现**: 无服务器依赖，部署简单

## 适用场景

- **数据清洗**: 识别重复或相似的记录
- **名称匹配**: 公司名称、人名等标准化
- **文本去重**: 批量文本相似度检测
- **数据整合**: 多源数据的匹配和合并

这个工具体现了"简单易用、功能强大、扩展性好"的设计理念，通过模块化架构和用户友好的界面，将复杂的文本相似度计算包装成易用的工具。
