<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字符串相似度比对工具</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>字符串相似度比对工具</h1>
                <p>对比两列文本，查找最相似候选并高亮差异</p>
            </div>
            <div class="header-actions">
                <button id="toggle-theme" class="theme-toggle" title="切换主题">切换主题</button>
            </div>
        </header>

        <div class="main-content">
            <!-- 输入区域 -->
            <section class="input-section">
                <h2>输入数据</h2>
                <div class="input-group">
                    <div class="input-column">
                        <label for="source-column">源数据列（待比对）</label>
                        <textarea id="source-column" placeholder="粘贴源数据，每行一条..."></textarea>
                        <div class="input-info">条数：<span id="source-count">0</span></div>
                        <div class="sample-hint" id="source-hint">提示：每行一条文本，支持从 Excel 粘贴</div>
                    </div>
                    <div class="input-column">
                        <label for="target-column">目标数据列（候选）</label>
                        <textarea id="target-column" placeholder="粘贴候选数据，每行一条..."></textarea>
                        <div class="input-info">条数：<span id="target-count">0</span></div>
                        <div class="sample-hint" id="target-hint">提示：每行一条文本，支持从 Excel 粘贴</div>
                    </div>
                </div>
            </section>

            <!-- 比较设置 -->
            <section class="settings-section">
                <h2>比较设置</h2>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="ignore-punctuation" checked>
                            忽略标点
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="fullwidth-to-halfwidth" checked>
                            全角转半角
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="ignore-invisible-chars" checked>
                            忽略不可见字符
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="whole-string-mode" checked>
                            整串对比
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="synonym-groups">同义词组（用逗号分隔）</label>
                        <textarea id="synonym-groups" placeholder="例如：阿里巴巴, 阿里"></textarea>
                        <div class="sample-hint" id="synonym-hint">同组第一个词作为代表词。多组可用换行/分号/顿号分隔。</div>
                    </div>
                    <div class="setting-item">
                        <label for="ignore-terms">忽略对比词（逗号/空格/换行分隔）</label>
                        <textarea id="ignore-terms" placeholder="例如：股份有限公司, 有限公司, 科技, 信息"></textarea>
                        <div class="sample-hint">这些词将被直接忽略，不参与相似度对比</div>
                    </div>
                </div>
            </section>

            <!-- 控制按钮 -->
            <section class="control-section">
                <div class="control-head">
                    <div class="threshold-inline">
                        <label for="similarity-threshold">相似度阈值</label>
                        <input type="range" id="similarity-threshold" min="0" max="100" value="70">
                        <span id="threshold-value">70%</span>
                    </div>
                    <div class="progress-wrap">
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                        <div id="progress-text" class="progress-text">准备就绪</div>
                    </div>
                </div>

                <div class="control-buttons">
                    <button id="load-sample" class="btn btn-secondary">加载示例数据</button>
                    <button id="start-comparison" class="btn btn-primary">开始比对</button>
                    <button id="stop-comparison" class="btn btn-danger" disabled>停止比对</button>
                </div>
            </section>

            <!-- 结果展示 -->
            <section class="results-section">
                <h2>对比结果</h2>
                <div class="results-controls">
                    <button id="export-simple" class="btn btn-info">导出简化结果</button>
                    <button id="export-results" class="btn btn-success">导出结果</button>
                    <button id="copy-simple" class="btn btn-warning">复制简单结果</button>
                    <button id="copy-results" class="btn btn-secondary">复制结果</button>
                    <button id="clear-results" class="btn btn-secondary">清空结果</button>
                </div>
                <div id="results-container" class="results-container">
                    <div class="no-results">暂无比对结果</div>
                </div>
            </section>
        </div>
    </div>

    <script src="similarity.js"></script>
    <script src="synonyms_patch.js"></script>
    <script src="app.js"></script>
    <script src="export_excel_patch.js"></script>
    <script src="settings_session_patch.js"></script>
</body>
</html>
